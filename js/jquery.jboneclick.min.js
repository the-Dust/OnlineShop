;/*
jbOneClick v0.1 2015
by Jet Bit - http://JetBit.ru

For more information, visit:
http://jetbit.ru/market/jboneclick
*/(function(e,t,n,r){function o(t,n){this.element=t;this.options=e.extend({},s,n);this._defaults=s;this._name=i;this.init()}var i="jbOneClick",s={no_name:false,no_tel:false,no_submit:false,title: '\u0417\u0430\u043A\u0430\u0437\u0020\u0432\u0020\u043E\u0434\u0438\u043D\u0020\u043A\u043B\u0438\u043A',action_url: '/postmaster.php',success: '\u0417\u0430\u043A\u0430\u0437\u0020\u043F\u0440\u0438\u043D\u044F\u0442\u002E\u0020\u041C\u044B\u0020\u0441\u0432\u044F\u0436\u0435\u043C\u0441\u044F\u0020\u0441\u0020\u0432\u0430\u043C\u0438\u0020\u0432\u0020\u0431\u043B\u0438\u0436\u0430\u0439\u0448\u0435\u0435\u0020\u0432\u0440\u0435\u043C\u044F\u002E',fail: '\u0417\u0430\u043A\u0430\u0437\u0020\u043D\u0435\u0020\u043F\u0440\u0438\u043D\u044F\u0442\u002E\u0020\u0412\u043E\u0437\u043D\u0438\u043A\u043B\u0430\u0020\u043E\u0448\u0438\u0431\u043A\u0430\u002E',fields:{},postfix:"default"};o.prototype.init=function(){return this.build()};o.prototype.build=function(){function t(e,t){var n={};for(var r in e){n[r]=e[r]}for(var r in t){n[r]=t[r]}return n}var n=this;if(!e("#jbOneClick_overlay").length){e('<div id="jbOneClick_overlay" class="jbOneClick_overlay"></div>').appendTo(e("body"))}if(!e("#jbOneClick_"+this.options.postfix).length){e('<div id="jbOneClick_'+this.options.postfix+'" class="jbOneClick"><div class="jb_title">'+this.options.title+'</div><a title="\u0417\u0430\u043a\u0440\u044b\u0442\u044c" class="jb_close">\u0417\u0430\u043a\u0440\u044b\u0442\u044c</a><form class="jb_form"></form><div class="jb_success">'+this.options.success+'</div><div class="jb_progress"></div><div class="jb_fail">'+this.options.fail+"</div></div>").appendTo(e("body"));this.$success=e(".jb_success").hide();this.$fail=e(".jb_fail").hide();this.$progress=e(".jb_progress").hide();this.$overlay=e("#jbOneClick_overlay");this.$overlay=e("#jbOneClick_overlay");this.$container=e("#jbOneClick_"+this.options.postfix);this.$container.append(e('<a/>').html('\u00a9 \u006a\u0062\u0043\u0061\u006c\u006c\u004d\u0065').attr('\u0068\u0072\u0065\u0066','\u0068\u0074\u0074\u0070\u003A\u002F\u002F\u006A\u0062\u0063\u0061\u006C\u006C\u006D\u0065\u002E\u0072\u0075\u002F\u0064\u0065\u006D\u006F\u002F\u007A\u0061\u006B\u0061\u007A\u002D\u0074\u006F\u0076\u0061\u0072\u0061').attr('\u0074\u0061\u0072\u0067\u0065\u0074','\u005f\u0062\u006c\u0061\u006e\u006b').addClass("jb_dev"));this.$form=this.$container.find(".jb_form");var r={};if(!this.options.no_name){r.name={required:true,placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",type:"text"}}if(!this.options.no_tel){r.tel={required:true,placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",type:"text"}}this.options.fields=t(r,this.options.fields);if(!this.options.no_submit){this.options.fields.submit={value:"\u0417\u0430\u043A\u0430\u0437\u0430\u0442\u044C",type:"submit"}}if(!this.options.fields.product){this.options.fields.product={value:"",type:"hidden"}}if(!this.options.fields.action){this.options.fields.action={value:"callme",type:"hidden"}}e.each(this.options.fields,function(t,r){var i="";if(r.type&&r.type=="textarea"){i="<textarea "+(r.required?'required="required" ':"")+(r.class?'class="'+r.class+'" ':"")+(r.placeholder?'placeholder="'+r.placeholder+'" ':"")+'name="'+t+'">'+(r.value?'value="'+r.value+'" ':"")+"</textarea>"}else if(r.type&&r.type=="select"){i="<select "+(r.class?'class="'+r.class+'" ':"")+'name="'+t+'">';i+=r.placeholder?'<option disabled="disabled">'+r.placeholder+"</option>":"";for(var s=0;s<r.options.length;s++){i+='<option value="'+r.options[s]+'">'+r.options[s]+"</option>"}i+="</select>"}else{i="<input "+(r.required?'required="required" ':"")+(r.placeholder?'placeholder="'+r.placeholder+'" ':"")+(r.class?'class="'+r.class+'" ':"")+(r.value?'value="'+r.value+'" ':"")+'type="'+(r.type&&jQuery.inArray(r.type,["submit","hidden","text","email","date","color"])>=0?r.type:"text")+'" name="'+t+'" />'}e((r.type!="hidden"?'<div class="jb_input">'+(r.label?"<label>"+r.label+"</label>":""):"")+i+(r.type!="hidden"?"</div>":"")).appendTo(n.$form)});this.$container.hide().find(".jb_close").on("click",function(){n.end();return false});this.$overlay.hide().on("click",function(){n.end();return false});this.$form.on("submit",function(){n.submit();return false})}e(n.element).on("click",function(){n.show();return false})};o.prototype.submit=function(){var t=this;t.$container.find(".jb_progress").show();t.$container=e("#jbOneClick_"+this.options.postfix);t.$container.find("form").hide();e.ajax({type:"POST",url:this.options.action_url,data:this.$form.serialize(),success:function(e){t.$container.find(".jb_progress").hide();if(e=="200"){t.$container.find(".jb_success").show()}else{t.$container.find(".jb_fail").show()}},error:function(){t.$container.find(".jb_progress").hide();t.$container.find(".jb_fail").show()}});setTimeout(function(){t.end()},3e3);return false};o.prototype.end=function(){this.$overlay=e("#jbOneClick_overlay").fadeOut();this.$container=e(".jbOneClick").fadeOut();e("#jbOneClick_"+this.options.postfix).find("form")[0].reset();e(".jbOneClick .jb_success, .jbOneClick .jb_fail").hide();e(".jbOneClick form").show()};o.prototype.show=function(){this.$other=e(".jbOneClick:not(#jbOneClick_"+this.options.postfix+")").hide();this.$overlay=e("#jbOneClick_overlay").fadeIn();e("#jbOneClick_"+this.options.postfix).find("form")[0].reset();element=e(this.element);e("#jbOneClick_"+this.options.postfix).find("input,textarea").each(function(){if(element.data(e(this).attr("name"))){e(this).val(element.data(e(this).attr("name")))}});this.$container=e("#jbOneClick_"+this.options.postfix).show()};e.fn[i]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+i)){e.data(this,"plugin_"+i,new o(this,t))}})}})(jQuery,window,document)